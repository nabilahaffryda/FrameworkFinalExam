{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\backend\\\\src\\\\components\\\\Product.js\";\nimport React, { Component } from 'react';\nimport ProductContext from './ProductContext';\nimport firebase from \"firebase\";\nimport firebaseConfig from '../firebase/config'; // import {storage} from \"../firebase\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class Product extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getDataFromServerAPI = () => {\n      let ref = firebase.database().ref('/');\n      ref.on('value', snapshot => {\n        const state = snapshot.val();\n        this.setState(state);\n      });\n    };\n\n    this.saveDataToServerAPI = () => {\n      firebase.database().ref('/').set(this.state);\n    };\n\n    this.saveImage = () => {\n      if (this.state.imageProduct !== null) {\n        firebase.storage().ref(`/product-image/${this.state.imageProduct.image}`).put(this.state.imageProduct);\n      }\n    };\n\n    this.handleAddProduct = event => {\n      let formInsertProduct = { ...this.state.insertProduct\n      };\n      let timestamp = new Date().getTime();\n      formInsertProduct['uid'] = timestamp;\n      formInsertProduct[event.target.name] = event.target.value;\n      this.setState({\n        insertProduct: formInsertProduct\n      });\n    };\n\n    this.handleSave = event => {\n      let title = this.refs.titleProduct.value;\n      let body = this.refs.bodyProduct.value;\n      let pid = this.refs.pid.value;\n      let price = this.refs.priceProduct.value;\n      let image = this.refs.imageProductt.value;\n\n      if (pid && image && title & body && price) {\n        const {\n          listProduct\n        } = this.state;\n        const indexProduct = listProduct.findIndex(data => {\n          return data.pid === pid;\n        });\n        listProduct[indexProduct].image = image;\n        listProduct[indexProduct].title = title;\n        listProduct[indexProduct].body = body;\n        listProduct[indexProduct].price = price;\n        this.setState({\n          listProduct\n        });\n      } else if (image && title && body && price) {\n        const pid = new Date().getTime().toString();\n        const {\n          listProduct\n        } = this.state;\n        listProduct.push({\n          pid,\n          title,\n          body,\n          price\n        });\n        this.setState({\n          listProduct\n        });\n      }\n\n      this.refs.imageProduct.value = \"\";\n      this.refs.titleProduct.value = \"\";\n      this.refs.bodyProduct.value = \"\";\n      this.refs.priceProduct.value = \"\";\n      this.refs.pid.value = \"\";\n    };\n\n    this.handleDeleteProduct = idProduct => {\n      const {\n        listProduct\n      } = this.state;\n      const newState = listProduct.filter(data => {\n        return data.pid !== idProduct;\n      });\n      this.setState({\n        listProduct: newState\n      });\n    };\n\n    firebase.initializeApp(firebaseConfig);\n    this.state = {\n      listProduct: []\n    };\n  }\n\n  componentDidMount() {\n    this.getDataFromServerAPI();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState !== this.state) {\n      this.saveDataToServerAPI();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"content-wrapper\",\n          className: \"col-xs-12 col-sm-12 col-md-12 col-lg-12 onecol\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"main\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"content\",\n              className: \"page-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 72\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 81\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"add-form text-center \",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"text-center title-page\",\n                  children: \"Add New Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  className: \"js-addproduct-form border-bottom\",\n                  children: [/*#__PURE__*/_jsxDEV(\"center\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-6\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            className: \"form-control\",\n                            ref: \"titleProduct\",\n                            id: \"title\",\n                            name: \"title\",\n                            onChange: this.handleAddProduct,\n                            type: \"text\",\n                            placeholder: \"Name\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 104,\n                            columnNumber: 49\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 103,\n                          columnNumber: 45\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 102,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            className: \"form-control\",\n                            ref: \"bodyProduct\",\n                            id: \"body\",\n                            name: \"body\",\n                            onChange: this.handleAddProduct,\n                            type: \"text\",\n                            placeholder: \"Description\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 109,\n                            columnNumber: 49\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 108,\n                          columnNumber: 45\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 107,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            className: \"form-control\",\n                            ref: \"priceProduct\",\n                            id: \"price\",\n                            name: \"price\",\n                            onChange: this.handleAddProduct,\n                            type: \"number\",\n                            placeholder: \"Price\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 114,\n                            columnNumber: 49\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 113,\n                          columnNumber: 45\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 112,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            className: \"form-control\",\n                            ref: \"imageProduct\",\n                            id: \"image\",\n                            name: \"image\",\n                            type: \"file\",\n                            onChange: this.handleAddProduct,\n                            placeholder: \"Picture\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 119,\n                            columnNumber: 49\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 118,\n                          columnNumber: 45\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 117,\n                        columnNumber: 45\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"hidden\",\n                      name: \"pid\",\n                      ref: \"pid\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 123,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 46\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"clearfix\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-primary\",\n                        onClick: this.handleSave,\n                        type: \"submit\",\n                        children: \"Add Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 127,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 43\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 52\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 44\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-center title-page\",\n                  children: \"Features Products\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"container\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"tab-content product-items\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      id: \"grid\",\n                      className: \"related tab-pane fade in active show\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"row\",\n                        children: this.state.listProduct.map(product => {\n                          return /*#__PURE__*/_jsxDEV(ProductContext, {\n                            image: product.image,\n                            title: product.title,\n                            body: product.body,\n                            price: product.price,\n                            idProduct: product.pid,\n                            deleteProduct: pid => this.handleDeleteProduct(pid)\n                          }, product.pid, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 142,\n                            columnNumber: 68\n                          }, this);\n                        })\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nexport default Product;","map":{"version":3,"sources":["D:/react/backend/src/components/Product.js"],"names":["React","Component","ProductContext","firebase","firebaseConfig","Product","constructor","props","getDataFromServerAPI","ref","database","on","snapshot","state","val","setState","saveDataToServerAPI","set","saveImage","imageProduct","storage","image","put","handleAddProduct","event","formInsertProduct","insertProduct","timestamp","Date","getTime","target","name","value","handleSave","title","refs","titleProduct","body","bodyProduct","pid","price","priceProduct","imageProductt","listProduct","indexProduct","findIndex","data","toString","push","handleDeleteProduct","idProduct","newState","filter","initializeApp","componentDidMount","componentDidUpdate","prevProps","prevState","render","map","product"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport ProductContext from './ProductContext';\r\nimport firebase from \"firebase\";\r\nimport firebaseConfig from '../firebase/config';\r\n// import {storage} from \"../firebase\";\r\n\r\nexport class Product extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        firebase.initializeApp(firebaseConfig);\r\n        this.state = {\r\n            listProduct: []\r\n        };\r\n    }\r\n    getDataFromServerAPI = () => {\r\n        let ref = firebase.database().ref('/')\r\n        ref.on('value', snapshot => {\r\n            const state = snapshot.val()\r\n            this.setState(state)\r\n        })\r\n    }\r\n    saveDataToServerAPI = () => {\r\n        firebase.database()\r\n            .ref('/')\r\n            .set(this.state)\r\n    }\r\n    componentDidMount(){\r\n        this.getDataFromServerAPI();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(prevState !== this.state){\r\n            this.saveDataToServerAPI();\r\n        }\r\n    }\r\n    saveImage = () => {\r\n        if(this.state.imageProduct !== null){\r\n            firebase\r\n                .storage()\r\n                .ref(`/product-image/${this.state.imageProduct.image}`)\r\n                .put(this.state.imageProduct);\r\n        }\r\n    }\r\n\r\n    handleAddProduct = (event) => {\r\n        let formInsertProduct = { ...this.state.insertProduct};\r\n        let timestamp = new Date().getTime();\r\n        formInsertProduct['uid'] = timestamp;\r\n        formInsertProduct[event.target.name] = event.target.value;\r\n        this.setState({insertProduct: formInsertProduct,});\r\n    }\r\n    \r\n    handleSave = (event) => {\r\n        let title = this.refs.titleProduct.value;\r\n        let body = this.refs.bodyProduct.value;\r\n        let pid = this.refs.pid.value;\r\n        let price = this.refs.priceProduct.value;\r\n        let image = this.refs.imageProductt.value;\r\n\r\n        if (pid && image && title & body && price){\r\n            const{listProduct} = this.state;\r\n            const indexProduct = listProduct.findIndex(data => {\r\n                return data.pid === pid;\r\n            });\r\n            listProduct[indexProduct].image = image;\r\n            listProduct[indexProduct].title = title;\r\n            listProduct[indexProduct].body = body;\r\n            listProduct[indexProduct].price = price;\r\n            this.setState({listProduct});\r\n        }else if(image && title && body && price){\r\n            const pid = new Date().getTime().toString();\r\n            const {listProduct} = this.state;\r\n            listProduct.push({pid, title, body, price});\r\n            this.setState({listProduct});\r\n        }\r\n        this.refs.imageProduct.value = \"\";\r\n        this.refs.titleProduct.value = \"\";\r\n        this.refs.bodyProduct.value = \"\";\r\n        this.refs.priceProduct.value = \"\";\r\n        this.refs.pid.value = \"\";\r\n    }\r\n\r\n    handleDeleteProduct = (idProduct) => {\r\n        const {listProduct} = this.state;\r\n        const newState = listProduct.filter(data => {\r\n            return data.pid !== idProduct;\r\n        });\r\n        this.setState({listProduct: newState});\r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div id=\"content-wrapper\" className=\"col-xs-12 col-sm-12 col-md-12 col-lg-12 onecol\">\r\n                        <div id=\"main\">\r\n                            <div id=\"content\" className=\"page-content\"><br></br><br></br>\r\n                                <div className=\"add-form text-center \">\r\n                                    <h1 className=\"text-center title-page\">Add New Product</h1>\r\n                                    <form className=\"js-addproduct-form border-bottom\">\r\n                                    <center>\r\n                                        <div className=\"col-sm-6\">\r\n                                            <div className=\"form-group\">\r\n                                            <div>\r\n                                                <input className=\"form-control\" ref=\"titleProduct\" id=\"title\" name=\"title\" onChange={this.handleAddProduct} type=\"text\" placeholder=\"Name\" />\r\n                                            </div>\r\n                                            </div>\r\n                                            <div className=\"form-group\">\r\n                                            <div>\r\n                                                <input className=\"form-control\" ref=\"bodyProduct\" id=\"body\" name=\"body\" onChange={this.handleAddProduct} type=\"text\" placeholder=\"Description\" />\r\n                                            </div>\r\n                                            </div>\r\n                                            <div className=\"form-group\">\r\n                                            <div>\r\n                                                <input className=\"form-control\" ref=\"priceProduct\" id=\"price\" name=\"price\" onChange={this.handleAddProduct} type=\"number\" placeholder=\"Price\" />\r\n                                            </div>\r\n                                            </div>\r\n                                            <div className=\"form-group\">\r\n                                            <div>\r\n                                                <input className=\"form-control\" ref=\"imageProduct\" id=\"image\" name=\"image\" type=\"file\" onChange={this.handleAddProduct} placeholder=\"Picture\" />\r\n                                            </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <input type=\"hidden\" name=\"pid\" ref=\"pid\"/>\r\n                                    </center><br></br>\r\n                                    <div className=\"clearfix\">\r\n                                        <div>\r\n                                        <button className=\"btn btn-primary\"  onClick={this.handleSave} type=\"submit\">\r\n                                            Add Product\r\n                                        </button>\r\n                                        </div>\r\n                                    </div><br></br><br></br>\r\n                                    </form><br></br>\r\n                                </div>\r\n                                <center><h2 className=\"text-center title-page\">Features Products</h2></center>\r\n                                <section>\r\n                                    <div className=\"container\">\r\n                                    <div className=\"tab-content product-items\">\r\n                                        <div id=\"grid\" className=\"related tab-pane fade in active show\">\r\n                                            <div className=\"row\">\r\n                                                {\r\n                                                        this.state.listProduct.map(product => {\r\n                                                            return <ProductContext\r\n                                                            key = {product.pid}\r\n                                                            image={product.image}\r\n                                                            title={product.title}\r\n                                                            body={product.body}\r\n                                                            price={product.price}\r\n                                                            idProduct={product.pid}\r\n                                                            deleteProduct={(pid) => this.handleDeleteProduct(pid)}/>\r\n                                                        })\r\n                                                    }\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </section>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n} export default Product"]},"metadata":{},"sourceType":"module"}